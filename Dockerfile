FROM openjdk:11-jre-slim
WORKDIR /usr/src/app/
ADD /build/libs/HudiMetadataExtractor-1.0-SNAPSHOT-all.jar HudiMetadataExtractor-1.0-SNAPSHOT-all.jar

# Run
ENV FAT_JAR HudiMetadataExtractor-1.0-SNAPSHOT-all.jar
ENTRYPOINT ["sh", "-c", "java -jar $FAT_JAR \"$@\"", "--"]

docker run -it --rm \
    -e AWS_ACCESS_KEY_ID=ASIAYPIZTOQELES2B47W \
    -e AWS_SECRET_ACCESS_KEY=ey/gvXDtPscWaKBtyCKqm+bwSvhVC0icMaPlnnpl \
    -e AWS_SESSION_TOKEN=IQoJb3JpZ2luX2VjELP//////////wEaCXVzLWVhc3QtMSJIMEYCIQDReEtoN3f3bWs2ZS9yRnFoIpYjXbDpLUJgqjrwHosWcgIhANuIfFVq4XxR3uf/l2zf1E2sTOfq+/GjRPBqSpp9iQlwKowDCOz//////////wEQAhoMNTgyNTU4NjQzMjA4Igz+UdhqSKh2dvF5JZAq4AJBUsT18NRRKvanSmZa2QL9DtxnQDBLJ+WU/13w8P0Hfv2D3ceSP2rBIBQLVgXUwkDs1hSo2y4qnNUVwe1aNM+mbp8ZnZjCwz4MOIi5ISp5UzZuMpW+WvZQ62U5eHoukbHbsmLXwbOpl5CCgm1bfmgIynkqrfhMFhIkDENdV1UiGuh8WhwgJ0wX79YUbBFGAIo5lphMSk8q64okjCEZqY9H0ay7TMVUdTWXZanbVsDJLE3X6p9IUvcakqj6yybDnYHRQ20Hx/4DRNqBy/VhxSyvNKA4ZmFzrpoMoxHNwbazQOqRuICSHPar0Bcjrv5TZn1Y+uZGH5kyHZkkEkdpsB3XipF1Jt4e2khoh51h530X4ROaxQhBo8ERf000165EJ45HiolKpG39fDwuiL9O2CqfbRdMCI5VfAY08wsUrpGv6FnL62PLMCSrrG1x2ERIj2WT7MZPcLBgOTmDraS/MxtpMLWYuKoGOqUBXtQTr3ukQAubmyR+yBQyExiLRYzC7KKYUcyWb5lzGgR2GLoD8r7UVEH7ZvfRQ7qwNElgrceeAGaDXOwq+4iOJhPPJ1CjkkFcvgkuj8EL+j1xgSh28wAcDJAborb7RZbfQaloalCMlnkY6vSAB6PoRer0DBYFJyTxuJi1mphmGohXaXor7Qjcr7g5qYObG2qdNk5Ma+XLKQ3Y0MntuERuJQeFCu82 \
    -v /Users/sampansnayak/workspace/HudiMetadataExtractor/aws-test-config.yaml:/app/config.yaml \
    local -p  /app/config.yaml

export AWS_ACCESS_KEY_ID="ASIAYPIZTOQELES2B47W"
export AWS_SECRET_ACCESS_KEY="ey/gvXDtPscWaKBtyCKqm+bwSvhVC0icMaPlnnpl"
export AWS_SESSION_TOKEN="IQoJb3JpZ2luX2VjELP//////////wEaCXVzLWVhc3QtMSJIMEYCIQDReEtoN3f3bWs2ZS9yRnFoIpYjXbDpLUJgqjrwHosWcgIhANuIfFVq4XxR3uf/l2zf1E2sTOfq+/GjRPBqSpp9iQlwKowDCOz//////////wEQAhoMNTgyNTU4NjQzMjA4Igz+UdhqSKh2dvF5JZAq4AJBUsT18NRRKvanSmZa2QL9DtxnQDBLJ+WU/13w8P0Hfv2D3ceSP2rBIBQLVgXUwkDs1hSo2y4qnNUVwe1aNM+mbp8ZnZjCwz4MOIi5ISp5UzZuMpW+WvZQ62U5eHoukbHbsmLXwbOpl5CCgm1bfmgIynkqrfhMFhIkDENdV1UiGuh8WhwgJ0wX79YUbBFGAIo5lphMSk8q64okjCEZqY9H0ay7TMVUdTWXZanbVsDJLE3X6p9IUvcakqj6yybDnYHRQ20Hx/4DRNqBy/VhxSyvNKA4ZmFzrpoMoxHNwbazQOqRuICSHPar0Bcjrv5TZn1Y+uZGH5kyHZkkEkdpsB3XipF1Jt4e2khoh51h530X4ROaxQhBo8ERf000165EJ45HiolKpG39fDwuiL9O2CqfbRdMCI5VfAY08wsUrpGv6FnL62PLMCSrrG1x2ERIj2WT7MZPcLBgOTmDraS/MxtpMLWYuKoGOqUBXtQTr3ukQAubmyR+yBQyExiLRYzC7KKYUcyWb5lzGgR2GLoD8r7UVEH7ZvfRQ7qwNElgrceeAGaDXOwq+4iOJhPPJ1CjkkFcvgkuj8EL+j1xgSh28wAcDJAborb7RZbfQaloalCMlnkY6vSAB6PoRer0DBYFJyTxuJi1mphmGohXaXor7Qjcr7g5qYObG2qdNk5Ma+XLKQ3Y0MntuERuJQeFCu82"